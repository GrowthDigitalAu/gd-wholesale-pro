{% schema %}
{
  "name": "B2B Custom Form",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "form_id",
      "label": "Form ID",
      "info": "Enter the ID of the form you created in the app."
    },
    {
      "type": "header",
      "content": "Style Settings"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "label": "Section Padding",
      "default": 40
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Custom CSS",
      "info": "Add custom CSS to override form styles."
    }
  ]
}
{% endschema %}

{{ 'custom-form.css' | asset_url | stylesheet_tag }}

{% if block.settings.custom_css != blank %}
  <style>
    {{ block.settings.custom_css }}
  </style>
{% endif %}
<script src="{{ 'country-codes.js' | asset_url }}" defer></script>
<script src="{{ 'custom-form.js' | asset_url }}" defer></script>

<div
  id="gd-custom-form-{{ block.id }}"
  class="gd-custom-form-wrapper"
  style="background-color: {{ block.settings.bg_color }}; padding: {{ block.settings.padding }}px 20px;"
>
  <div class="gd-form-loading">Loading form...</div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (window.GDCustomForm) {
      window.GDCustomForm.init('{{ block.id }}', '{{ block.settings.form_id }}');
    }
  });
</script>
